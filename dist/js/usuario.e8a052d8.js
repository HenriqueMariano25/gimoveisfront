(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["usuario"],{"159b":function(t,e,a){var r=a("da84"),o=a("fdbc"),s=a("17c2"),i=a("9112");for(var n in o){var c=r[n],u=c&&c.prototype;if(u&&u.forEach!==s)try{i(u,"forEach",s)}catch(l){u.forEach=s}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,o=a("a640"),s=a("ae40"),i=o("forEach"),n=s("forEach");t.exports=i&&n?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var r=a("23e7"),o=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"737a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"barra-top-usuario",attrs:{"align-v":"center"}},[a("b-col",[a("h1",{staticClass:"mb-1"},[t._v("Cadastro de Usuários")])]),a("b-col",{staticClass:"my-1",attrs:{cols:"3"}},[a("b-form-group",{staticClass:"mb-0"},[a("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("b-icon",{attrs:{icon:"search"}})],1)]},proxy:!0}])},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Ex: João da Silva"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)],1),a("b-row",{staticClass:"tabela-usuarios"},[a("b-col",{staticClass:"col-tabela-usuarios"},[a("b-table",{attrs:{id:"tabela-usuario","primary-key":"nome","tbody-transition-props":t.transProps,bordered:"","head-variant":"dark","sort-icon-left":"",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"show-empty":"",small:"",striped:"",hover:"",outlined:"","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px)","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered,"row-clicked":function(e){return t.$set(e,"_showDetails",!e._showDetails)}},scopedSlots:t._u([{key:"cell(nome)",fn:function(e){return[a("p",{staticClass:"tr-usuario"},[t._v(t._s(e.item.nome))])]}},{key:"cell(email)",fn:function(e){return[a("p",{staticClass:"tr-usuario"},[t._v(t._s(e.item.email))])]}},{key:"cell(usuario)",fn:function(e){return[a("p",{staticClass:"tr-usuario"},[t._v(t._s(e.item.usuario))])]}},{key:"cell(permissao)",fn:function(e){return[a("p",{staticClass:"tr-usuario"},[t._v(t._s(e.item.permissao))])]}},{key:"cell(editar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"edit"},on:{click:function(a){return t.editarUsuarioModal(e.item.id)}}})]}},{key:"cell(deletar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"delete"},on:{click:function(a){return t.deletarUsuarioModal(e.item)}}})]}},{key:"table-colgroup",fn:function(){return[a("col"),a("col"),a("col"),a("col"),a("col",{staticStyle:{width:"15px"}}),a("col",{staticStyle:{width:"15px"}})]},proxy:!0}])})],1)],1),a("b-container",{staticClass:"divider-personalizado",attrs:{fluid:""}},[a("b-row",{attrs:{"align-v":"end"}},[a("b-col",{attrs:{cols:"auto"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"left","first-text":"Primeira","last-text":"Última"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("b-col",{attrs:{sm:"5",md:"auto"}},[a("b-form-group",{staticClass:"mb-1",attrs:{label:"Por pagina","label-for":"per-page-select","label-cols-sm":"auto","label-cols-md":"auto","label-cols-lg":"auto","label-align-sm":"right","label-size":"sm",align:"left"}},[a("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"ml-auto",staticStyle:{"margin-bottom":"-5px"},attrs:{cols:"auto"}},[a("vs-button",{attrs:{color:"#24a35a",type:"filled",icon:"person_add"},on:{click:t.mostrarModal}},[t._v("Adicionar ")])],1)],1)],1),a("modal",{attrs:{name:"usuario-modal",width:"60%",height:"auto",scrollable:!0,"click-to-close":!1}},[a("h3",[t._v("Adicionando usuário")]),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{cols:"6"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Nome do operador*"},model:{value:t.usuario.nome,callback:function(e){t.$set(t.usuario,"nome",e)},expression:"usuario.nome"}})],1),a("b-col",{attrs:{cols:"6"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Usuário*"},model:{value:t.usuario.usuario,callback:function(e){t.$set(t.usuario,"usuario",e)},expression:"usuario.usuario"}})],1)],1),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{cols:"6"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Email*"},model:{value:t.usuario.email,callback:function(e){t.$set(t.usuario,"email",e)},expression:"usuario.email"}})],1),a("b-col",[a("b-form-group",{attrs:{id:"select-permissao",label:"Permissão"}},[a("b-form-select",{attrs:{options:t.tiposPermissoes},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.usuario.permissao,callback:function(e){t.$set(t.usuario,"permissao",e)},expression:"usuario.permissao"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Senha*",type:"password"},model:{value:t.usuario.senha,callback:function(e){t.$set(t.usuario,"senha",e)},expression:"usuario.senha"}})],1)],1),a("b-row",{attrs:{"align-h":"end"}},[a("b-col",{attrs:{cols:"2"}},[1==t.editar?a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},on:{click:t.editarUsuario}},[t._v("Salvar ")]):a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},on:{click:t.cadastrarUsuario}},[t._v(" Salvar ")])],1),a("b-col",{attrs:{cols:"2"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#707070",type:"filled",icon:"clear"},on:{click:t.esconderModal}},[t._v(" Cancelar ")])],1)],1)],1)],1)},o=[],s=(a("4160"),a("b64b"),a("159b"),a("96cf"),a("1da1")),i=a("7424"),n={name:"VisualizarUsuario",data:function(){return{transProps:{name:"flip-list"},items:[],fields:[{key:"nome",label:"Nome do Operador",sortable:!0,thClass:"text-center"},{key:"email",label:"Email",sortable:!0,thClass:"text-center"},{key:"usuario",label:"Usuário",sortable:!0,thClass:"text-center"},{key:"permissao",label:"Nivel de permissão",sortable:!0,class:"text-center"},{key:"editar",label:""},{key:"deletar",label:""}],totalRows:1,currentPage:1,perPage:25,pageOptions:[25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],usuario:{nome:"",usuario:"",email:"",permissao:null,senha:""},tiposPermissoes:[],editar:!1}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.buscarUsuarios();case 1:case"end":return e.stop()}}),e)})))()},methods:{buscarUsuarios:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/usuarios").then((function(e){t.items=e.data,t.totalRows=t.items.length})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},buscarTiposPermissao:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/usuarios/tipos_permissao").then((function(e){t.tiposPermissoes=e.data}));case 2:case"end":return e.stop()}}),e)})))()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},deletarUsuario:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].delete("/usuario/deletar/".concat(t.id)).then((function(){e.buscarUsuarios()}));case 2:case"end":return a.stop()}}),a)})))()},deletarUsuarioModal:function(t){var e=this;this.$bvModal.msgBoxConfirm("Tem certeza que deseja deletar o usuário: ".concat(t.nome," ?"),{title:"Deletar usuário",buttonSize:"sm",okTitle:"Deletar",cancelTitle:"Cancelar",okVariant:"danger",footerClass:"p-2",centered:!0}).then((function(a){a&&e.deletarUsuario(t)}))},editarUsuarioModal:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].get("/usuario/".concat(t)).then((function(t){e.usuario=t.data,e.mostrarModal(),e.editar=!0}));case 2:case"end":return a.stop()}}),a)})))()},editarUsuario:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$store.state.usuario.id,e.next=3,i["a"].post("/usuario/editar/".concat(t.usuario.id),{data:t.usuario,idUsuario:a}).then((function(e){var a=e.data.nome;t.$vs.notify({text:"Usuário editado com sucesso: ".concat(a," !"),position:"top-center",color:"warning",time:6e3,icon:"check_circle_outline"}),t.buscarUsuarios(),t.limparModal(),t.esconderModal()}));case 3:case"end":return e.stop()}}),e)})))()},mostrarModal:function(){this.$modal.show("usuario-modal"),this.buscarTiposPermissao()},esconderModal:function(){this.$modal.hide("usuario-modal"),this.limparModal(),this.editar=!1},limparModal:function(){var t=this;Object.keys(this.usuario).forEach((function(e){t.usuario[e]=""})),this.usuario.permissao=null},cadastrarUsuario:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validarCamposObrigatorio()){e.next=4;break}return a=t.$store.state.usuario.id,e.next=4,i["a"].post("/usuario/cadastrar",{data:t.usuario,idUsuario:a}).then((function(e){var a=e.data[0].nome;t.esconderModal(),t.$vs.notify({text:"Usuário cadastrado com sucesso: ".concat(a,"!"),position:"top-center",color:"success",time:6e3,icon:"check_circle_outline"}),t.buscarUsuarios(),t.limparModal()}));case 4:case"end":return e.stop()}}),e)})))()},validarCamposObrigatorio:function(){return""!=this.usuario["nome"]&&""!=this.usuario["email"]&&""!=this.usuario["usuario"]&&null!=this.usuario["permissao"]||(this.$vs.notify({text:"Campos obrigatorios vazio.",position:"top-center",color:"danger",time:4e3,icon:"check_circle_outline"}),!1)}}},c=n,u=(a("b68a"),a("2877")),l=Object(u["a"])(c,r,o,!1,null,null,null);e["default"]=l.exports},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,a){var r=a("23e7"),o=a("7b0b"),s=a("df75"),i=a("d039"),n=i((function(){s(1)}));r({target:"Object",stat:!0,forced:n},{keys:function(t){return s(o(t))}})},b68a:function(t,e,a){"use strict";a("e92a")},e92a:function(t,e,a){}}]);
//# sourceMappingURL=usuario.e8a052d8.js.map