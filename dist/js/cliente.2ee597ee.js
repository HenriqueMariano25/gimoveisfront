(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cliente"],{"156f":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"barra-top-contrato",attrs:{"align-v":"center"}},[a("b-col",[a("h1",{staticClass:"mb-1"},[t._v("Cadastro de Contrato")])]),a("b-col",{staticClass:"my-1",attrs:{cols:"3"}},[a("b-form-group",{staticClass:"mb-0"},[a("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("b-icon",{attrs:{icon:"search"}})],1)]},proxy:!0}])},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Ex: João da Silva"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)],1),a("b-row",{staticClass:"tabela-responsaveis"},[a("b-col",{staticClass:"col-tabela-responsaveis"},[a("b-table",{attrs:{id:"tabela-contrato","primary-key":"id","tbody-transition-props":t.transProps,bordered:"","head-variant":"dark","sort-icon-left":"",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"show-empty":"",small:"",busy:t.carregandoContratos,striped:"",hover:"",outlined:"","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px)","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",{staticClass:"ml-2"},[t._v("Carregando...")])],1)]},proxy:!0},{key:"cell(id)",fn:function(e){return[a("p",{staticClass:"tr-contrato"},[t._v(t._s(("0000"+e.item.id).slice(-4)))])]}},{key:"cell(nome_cliente)",fn:function(e){return[a("p",{staticClass:"tr-contrato"},[t._v(t._s(e.item.nome_cliente))])]}},{key:"cell(nome_responsavel)",fn:function(e){return[a("p",{staticClass:"tr-contrato"},[t._v(t._s(e.item.nome_responsavel))])]}},{key:"cell(nome_imovel)",fn:function(e){return[a("p",{staticClass:"tr-contrato"},[t._v(t._s(e.item.nome_imovel))])]}},{key:"cell(status)",fn:function(e){return[e.item.nome_pdf?a("p",{staticClass:"tr-contrato text-capitalize"},[t._v(t._s(e.item.status))]):a("p",{staticClass:"tr-contrato",staticStyle:{color:"red"}},[a("b",[t._v("Falta PDF")])])]}},{key:"cell(contrato)",fn:function(t){return[a("div",{staticClass:"item-coluna-centralizada"},[a("vs-button",{attrs:{type:"flat",color:"dark",disabled:!t.item.url,target:"",href:t.item.url,icon:"description"}})],1)]}},{key:"cell(editar)",fn:function(e){return[a("div",{staticClass:"item-coluna-centralizada"},[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"edit"},on:{click:function(a){return t.editarContratoModal(e.item.id)}}})],1)]}},{key:"cell(deletar)",fn:function(e){return[a("div",{staticClass:"item-coluna-centralizada"},[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"delete"},on:{click:function(a){return t.deletarContratoModal(e.item)}}})],1)]}},{key:"table-colgroup",fn:function(){return[a("col"),a("col"),a("col"),a("col"),a("col"),a("col",{staticStyle:{width:"15px"}}),a("col",{staticStyle:{width:"15px"}}),a("col",{staticStyle:{width:"15px"}})]},proxy:!0}])})],1)],1),a("b-container",{staticClass:"divider-personalizado",attrs:{fluid:""}},[a("b-row",{attrs:{"align-v":"end"}},[a("b-col",{attrs:{cols:"auto"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"left","first-text":"Primeira","last-text":"Última"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("b-col",{attrs:{sm:"5",md:"auto"}},[a("b-form-group",{staticClass:"mb-1",attrs:{label:"Por pagina","label-for":"per-page-select","label-cols-sm":"auto","label-cols-md":"auto","label-cols-lg":"auto","label-align-sm":"right","label-size":"sm",align:"left"}},[a("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"ml-auto",staticStyle:{"margin-bottom":"-5px"},attrs:{cols:"auto"}},[a("vs-button",{attrs:{color:"#24a35a",type:"filled",icon:"note_add"},on:{click:t.mostrarModal}},[t._v("Adicionar ")])],1)],1)],1),a("modal",{staticClass:"modal-adicionando-responsavel",attrs:{name:"modal-contrato",id:"modal-contrato",width:"60%",height:"auto",scrollable:!0}},[a("h3",[t._v("Adicionando contrato")]),a("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:t.tabBoleto,callback:function(e){t.tabBoleto=e},expression:"tabBoleto"}},[a("b-tab",{attrs:{title:"Dados gerais",active:""}},[a("b-row",[a("b-col",[a("b-form-group",{attrs:{id:"select-contrato",label:"Responsável*"}},[a("b-form-select",{attrs:{options:t.responsaveis,"value-field":"id","text-field":"nome"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.contrato.id_responsavel,callback:function(e){t.$set(t.contrato,"id_responsavel",e)},expression:"contrato.id_responsavel"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"select-contrato",label:"Cliente*"}},[a("b-form-select",{attrs:{options:t.clientes,"value-field":"id","text-field":"nome"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.contrato.id_cliente,callback:function(e){t.$set(t.contrato,"id_cliente",e)},expression:"contrato.id_cliente"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"select-contrato",label:"Imóvel*"}},[a("b-form-select",{attrs:{options:t.imoveis,"value-field":"id","text-field":"nome"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.contrato.id_imovel,callback:function(e){t.$set(t.contrato,"id_imovel",e)},expression:"contrato.id_imovel"}})],1)],1)],1),a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data de Início*",type:"date"},model:{value:t.contrato.data_inicio,callback:function(e){t.$set(t.contrato,"data_inicio",e)},expression:"contrato.data_inicio"}})],1),a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data de Término*",type:"date",disabled:!t.ativo_data_termino},model:{value:t.contrato.data_fim,callback:function(e){t.$set(t.contrato,"data_fim",e)},expression:"contrato.data_fim"}})],1),a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Vigência",readonly:""},model:{value:t.contrato.vigencia,callback:function(e){t.$set(t.contrato,"vigencia",e)},expression:"contrato.vigencia"}})],1)],1),a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Carência"},model:{value:t.contrato.carencia,callback:function(e){t.$set(t.contrato,"carencia",e)},expression:"contrato.carencia"}})],1),a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Vencimento*",type:"date"},model:{value:t.contrato.data_vencimento,callback:function(e){t.$set(t.contrato,"data_vencimento",e)},expression:"contrato.data_vencimento"}})],1),a("b-col",[a("vs-input",{directives:[{name:"currency",rawName:"v-currency",value:{precision:2,autoDecimalMode:!0,distractionFree:!1,allowNegative:!1,currency:"BRL"},expression:"{precision: 2,autoDecimalMode: true,distractionFree: false,\n                      allowNegative: false, currency:'BRL'}"}],ref:"valor_boleto",staticClass:"input-personalizado",attrs:{"label-placeholder":"Valor do Boleto*"},model:{value:t.contrato.valor_boleto,callback:function(e){t.$set(t.contrato,"valor_boleto",e)},expression:"contrato.valor_boleto"}})],1)],1),a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Garantia"},model:{value:t.contrato.garantia,callback:function(e){t.$set(t.contrato,"garantia",e)},expression:"contrato.garantia"}})],1),a("b-col",[a("b-form-group",{attrs:{id:"select-contrato",label:"Fiador"}},[a("b-form-select",{attrs:{options:t.clientes,"value-field":"id","text-field":"descricao"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.contrato.fiador,callback:function(e){t.$set(t.contrato,"fiador",e)},expression:"contrato.fiador"}})],1)],1)],1)],1),a("b-tab",{attrs:{title:"Inf. adicionais"}},[a("b-row",[a("b-col",[a("b-form-file",{ref:"file",staticClass:"mt-3 arquivo-pdf",attrs:{type:"file",accept:".pdf",placeholder:"Escolha um arquivo para importar","drop-placeholder":"Solte o arquivo aqui!",disabled:!t.editar},on:{change:t.importarPDF}})],1),a("b-col",[t.editar?[t.contrato.nome_pdf?a("p",{staticClass:"p-contrato",staticStyle:{color:"green"}},[a("b",[t._v("Contrato importado")])]):a("p",{staticClass:"p-contrato",staticStyle:{color:"red"}},[a("b",[t._v("Contrato não importado")])])]:a("p",{staticClass:"p-contrato"},[a("b",[t._v("Para realizar a importação primeiro cadastre esse contrato")])])],2)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{id:"textarea",label:"Observação","label-for":"input-1"}},[a("b-form-textarea",{attrs:{id:"textarea",rows:"1s","max-rows":"6"},model:{value:t.contrato.observacao,callback:function(e){t.$set(t.contrato,"observacao",e)},expression:"contrato.observacao"}})],1)],1)],1)],1),a("b-tab",{attrs:{title:"Boletos",disabled:!t.editar}},[a("b-row",[a("b-col",[a("b-table",{attrs:{id:"tabela-boleto","primary-key":"id","tbody-transition-props":t.transProps,bordered:"","head-variant":"dark","sort-icon-left":"",items:t.boletos,fields:t.fieldsBoletos,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"show-empty":"",small:"",striped:"",hover:"",outlined:"","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px)","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered,"row-clicked":function(e){return t.$set(e,"_showDetails",!e._showDetails)}},scopedSlots:t._u([{key:"cell(data_vencimento)",fn:function(e){return[a("label",{staticClass:"tr-contrato"},[t._v(t._s(t.dayjs(e.item.data_vencimento).format("DD/MM/YYYY")))])]}},{key:"cell(valor)",fn:function(e){return[a("label",{staticClass:"tr-contrato"},[t._v("R$ "+t._s(e.item.valor.replace(".",",")))])]}},{key:"cell(status)",fn:function(e){return[a("label",{staticClass:"tr-contrato"},[t._v(t._s(e.item.status))])]}},{key:"cell(id)",fn:function(e){return[a("label",{staticClass:"tr-contrato"},[t._v(t._s(("000000"+e.item.id).slice(-6)))])]}},{key:"cell(data_quitacao)",fn:function(e){return[null!=e.item.data_quitacao&&""!=e.item.data_quitacao?a("label",{staticClass:"tr-contrato"},[t._v(" "+t._s(t.dayjs(e.item.data_quitacao).format("DD/MM/YYYY")))]):a("label",{staticClass:"tr-contrato"},[t._v(t._s(e.item.data_quitacao))])]}},{key:"cell(editar)",fn:function(e){return[a("div",{staticClass:"item-coluna-centralizada"},[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"edit"},on:{click:function(a){return t.editarBoletoModal(e.item)}}})],1)]}},{key:"cell(deletar)",fn:function(e){return[a("div",{staticClass:"item-coluna-centralizada"},["Pago"==e.item.status?a("vs-button",{attrs:{disabled:!0,type:"flat",color:"dark",icon:"delete"},on:{click:function(a){return t.deletarBoletoAlerta(e)}}}):a("vs-button",{attrs:{type:"flat",color:"dark",icon:"delete"},on:{click:function(a){return t.deletarBoletoAlerta(e)}}})],1)]}},{key:"table-colgroup",fn:function(){return[a("col"),a("col"),a("col"),a("col"),a("col"),a("col",{staticStyle:{width:"15px"}}),a("col",{staticStyle:{width:"15px"}})]},proxy:!0}])})],1)],1)],1)],1),a("b-row",{attrs:{"align-h":"end"}},[a("b-col",{attrs:{cols:"auto",align:"left"}},[2==t.tabBoleto?a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},nativeOn:{click:function(e){return t.mostrarModalAdicionarBoleto()}}},[t._v(" Adicionar Boleto ")]):t._e()],1),a("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.editar?a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},nativeOn:{click:function(e){return t.editarContrato(e)}}},[t._v(" Salvar ")]):a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},nativeOn:{click:function(e){return t.cadastrarContrato(!1)}}},[t._v(" Salvar ")])],1),t.editar?t._e():a("b-col",{attrs:{cols:"auto"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},nativeOn:{click:function(e){return t.cadastrarContrato(!0)}}},[t._v(" Salvar e Sair ")])],1),a("b-col",{attrs:{cols:"auto"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#707070",type:"filled",icon:"clear"},nativeOn:{click:function(e){return t.esconderModal(e)}}},[t._v(" Cancelar ")])],1)],1)],1),a("modal",{staticClass:"modal-adicionando-responsavel",attrs:{name:"modal-editar-boleto",width:"60%",height:"auto",scrollable:!0,"click-to-close":!1}},[a("b-container",[a("b-row",[a("b-col",[a("h4",[t._v("Editando boleto: "+t._s(("000000"+t.boleto.id).slice(-6)))])])],1),a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data Vencimento",type:"date"},model:{value:t.boleto.data_vencimento,callback:function(e){t.$set(t.boleto,"data_vencimento",e)},expression:"boleto.data_vencimento"}})],1),a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data Quitação",type:"date"},model:{value:t.boleto.data_quitacao,callback:function(e){t.$set(t.boleto,"data_quitacao",e)},expression:"boleto.data_quitacao"}})],1),a("b-col",[a("vs-input",{directives:[{name:"currency",rawName:"v-currency",value:{precision:2,autoDecimalMode:!0,distractionFree:!1,allowNegative:!1,currency:"BRL"},expression:"{precision: 2,autoDecimalMode: true,distractionFree: false,\n                      allowNegative: false, currency:'BRL'}"}],ref:"inputValor",staticClass:"input-personalizado",attrs:{"label-placeholder":"Valor"},model:{value:t.boleto.valor,callback:function(e){t.$set(t.boleto,"valor",e)},expression:"boleto.valor"}})],1),a("b-col",[a("b-form-group",{attrs:{id:"select-contrato",label:"Status"}},[a("b-form-select",{attrs:{options:t.status_boleto,"value-field":"id","text-field":"descricao"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.boleto.id_status_boleto,callback:function(e){t.$set(t.boleto,"id_status_boleto",e)},expression:"boleto.id_status_boleto"}})],1)],1)],1),a("b-row",{attrs:{"align-h":"end"}},[a("b-col",{attrs:{cols:"2"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},on:{click:t.editarBoleto}},[t._v(" Salvar ")])],1),a("b-col",{attrs:{cols:"2"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#707070",type:"filled",icon:"clear"},on:{click:t.esconderModalEditarBoleto}},[t._v(" Cancelar ")])],1)],1)],1)],1),a("modal",{staticClass:"modal-adicionando-responsavel",attrs:{name:"modal-adicionar-boleto",width:"60%",height:"auto",scrollable:!0,"click-to-close":!1}},[a("b-container",[a("b-row",[a("b-col",[a("h4",[t._v("Adicionando boleto:")])])],1),a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data Vencimento",type:"date"},model:{value:t.boleto.data_vencimento,callback:function(e){t.$set(t.boleto,"data_vencimento",e)},expression:"boleto.data_vencimento"}})],1),a("b-col",[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data Quitação",type:"date"},model:{value:t.boleto.data_quitacao,callback:function(e){t.$set(t.boleto,"data_quitacao",e)},expression:"boleto.data_quitacao"}})],1),a("b-col",[a("vs-input",{directives:[{name:"currency",rawName:"v-currency",value:{precision:2,autoDecimalMode:!0,distractionFree:!1,allowNegative:!1,currency:"BRL"},expression:"{precision: 2,autoDecimalMode: true,distractionFree: false,\n                      allowNegative: false, currency:'BRL'}"}],ref:"inputValor",staticClass:"input-personalizado",attrs:{"label-placeholder":"Valor"},model:{value:t.boleto.valor,callback:function(e){t.$set(t.boleto,"valor",e)},expression:"boleto.valor"}})],1),a("b-col",[a("b-form-group",{attrs:{id:"select-contrato",label:"Status"}},[a("b-form-select",{attrs:{options:t.status_boleto,"value-field":"id","text-field":"descricao"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.boleto.id_status_boleto,callback:function(e){t.$set(t.boleto,"id_status_boleto",e)},expression:"boleto.id_status_boleto"}})],1)],1)],1),a("b-row",{attrs:{"align-h":"end"}},[a("b-col",{attrs:{cols:"2"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},nativeOn:{click:function(e){return t.adicionarBoleto(e)}}},[t._v(" Salvar ")])],1),a("b-col",{attrs:{cols:"2"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#707070",type:"filled",icon:"clear"},nativeOn:{click:function(e){return t.esconderModalAdicionarBoleto(e)}}},[t._v(" Cancelar ")])],1)],1)],1)],1)],1)},r=[],n=(a("4160"),a("fb6a"),a("b64b"),a("ac1f"),a("5319"),a("159b"),a("96cf"),a("1da1")),i=a("7424"),l=a("5a0c"),s=a.n(l),c=a("6d6d"),u={name:"VisualizarContrato",data:function(){return{transProps:{name:"flip-list"},items:[],fields:[{key:"id",label:"Código",sortable:!0,class:"text-center"},{key:"nome_cliente",label:"Cliente",sortable:!0,thClass:"text-center"},{key:"nome_responsavel",label:"Responsável",sortable:!0,thClass:"text-center"},{key:"nome_imovel",label:"Imóvel",sortable:!0,thClass:"text-center"},{key:"status",label:"Status",class:"text-center"},{key:"contrato",label:""},{key:"editar",label:""},{key:"deletar",label:""}],fieldsBoletos:[{key:"id",label:"Código",sortable:!0,class:"text-center"},{key:"data_vencimento",label:"Vencimento",sortable:!0,class:"text-center"},{key:"valor",label:"Valor",sortable:!0,class:"text-center"},{key:"data_quitacao",label:"Data Quitação",sortable:!0,class:"text-center"},{key:"status",label:"Status",sortable:!0,class:"text-center"},{key:"editar",label:"",class:"text-center"},{key:"deletar",label:"",class:"text-center"}],totalRows:1,currentPage:1,perPage:25,pageOptions:[25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],contrato:{id:"",id_responsavel:null,id_cliente:null,id_imovel:null,data_inicio:"",data_fim:"",vigencia:"",data_vencimento:"",valor_boleto:"",carencia:"",garantia:"",fiador:"",locador:"",nome_pdf:"",observacao:""},boletos:[],boleto:{valor:"",valor_formatado:"",data_vencimento:"",data_quitacao:"",id:"",id_status_boleto:null},editar:!1,responsaveis:[],clientes:[],imoveis:[],btn_desabilitado:!1,ativo_data_termino:!1,dayjs:s.a,status_boleto:[],files:null,btn_importa_desabilitado:!0,carregandoContratos:!1,recarregarContratos:!1,tabBoleto:0}},methods:{buscarResponsaveis:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/contrato/responsaveis").then((function(e){t.responsaveis=e.data}));case 2:case"end":return e.stop()}}),e)})))()},buscarClientes:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/contrato/clientes").then((function(e){t.clientes=e.data}));case 2:case"end":return e.stop()}}),e)})))()},buscarImoveis:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/contrato/imoveis").then((function(e){t.imoveis=e.data}));case 2:case"end":return e.stop()}}),e)})))()},buscarContratos:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.carregandoContratos=!0,e.next=3,i["a"].get("/contratos").then((function(e){t.items=e.data,t.carregandoContratos=!1}));case 3:case"end":return e.stop()}}),e)})))()},buscarBoletos:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].get("/contrato/boletos",{params:{idContrato:t}}).then((function(t){e.boletos=t.data}));case 2:case"end":return a.stop()}}),a)})))()},buscarStatusBoleto:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/contrato/boleto/status").then((function(e){t.status_boleto=e.data}));case 2:case"end":return e.stop()}}),e)})))()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},deletarContrato:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].delete("/contrato/deletar/",{params:t}).then((function(){e.buscarContratos()}));case 2:case"end":return a.stop()}}),a)})))()},deletarContratoModal:function(t){var e=this;this.$bvModal.msgBoxConfirm("Tem certeza que deseja deletar o contrato: ".concat(t.id," ?"),{title:"Deletar contrato",buttonSize:"sm",okTitle:"Deletar",cancelTitle:"Cancelar",okVariant:"danger",footerClass:"p-2",centered:!0}).then((function(a){a&&e.deletarContrato(t)}))},editarContratoModal:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].get("/contrato",{params:{idContrato:t}}).then((function(a){e.contrato=a.data[0],e.contrato.valor_boleto="R$ ".concat(a.data[0].valor_boleto.replace(".",",")),e.buscarBoletos(t),e.mostrarModal(),e.editar=!0}));case 2:case"end":return a.stop()}}),a)})))()},editarContrato:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.contrato.valor_boleto_convertido=Object(c["b"])(t.contrato.valor_boleto),!t.validarCamposObrigatorio()){e.next=5;break}return a=t.$store.state.usuario.id,e.next=5,i["a"].post("/contrato/editar",{contrato:t.contrato,idUsuario:a}).then((function(e){var a=e.data[0].id;t.$vs.notify({text:"Contrato editado com sucesso: ".concat(a," !"),position:"top-center",color:"warning",time:6e3,icon:"check_circle_outline"}),t.buscarContratos(),t.limparModal(),t.esconderModal()})).catch((function(e){t.$vs.notify({text:"".concat(e.response.data.erro),position:"top-center",color:"danger",time:4e3,icon:"check_circle_outline"})}));case 5:case"end":return e.stop()}}),e)})))()},editarBoletoModal:function(t){var e=this;i["a"].get("/contrato/boleto",{params:{idBoleto:t.id}}).then((function(t){e.buscarStatusBoleto(),e.mostrarModalEditarBoleto(),e.boleto=t.data[0],e.boleto.valor="R$ ".concat(t.data[0].valor.replace(".",","))}))},editarBoleto:function(){var t=this;null==this.boleto.data_quitacao&&(this.boleto.data_quitacao=""),this.boleto.valor=Object(c["b"])(this.boleto.valor),i["a"].post("/contrato/boleto/editar",{boleto:this.boleto}).then((function(e){t.buscarBoletos(e.data[0].id_contrato),t.esconderModalEditarBoleto()}))},mostrarModal:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.buscarResponsaveis(),t.buscarClientes(),t.buscarImoveis(),t.$modal.show("modal-contrato");case 4:case"end":return e.stop()}}),e)})))()},esconderModal:function(){this.$modal.hide("modal-contrato"),this.limparModal(),this.editar=!1,this.recarregarContratos&&(this.buscarContratos(),this.recarregarContratos=!1)},limparModal:function(){var t=this;Object.keys(this.contrato).forEach((function(e){t.contrato[e]=""})),this.contrato.id_cliente=null,this.contrato.id_imovel=null,this.contrato.id_responsavel=null,this.boletos=[]},mostrarModalEditarBoleto:function(){this.$modal.show("modal-editar-boleto")},esconderModalEditarBoleto:function(){this.$modal.hide("modal-editar-boleto"),this.boleto={},this.boleto.id_status_boleto=null},limparModalEditarBoleto:function(){var t=this;Object.keys(this.boleto).forEach((function(e){t.contrato[e]=""}))},importarPDF:function(t){var e=this;if(this.editar){this.btn_importa_desabilitado=!1,this.files=t.target.files;for(var a=new FormData,o=0,r=Object.keys(this.files);o<r.length;o++){var n=r[o];a.append("files",this.files[n])}i["a"].post("/contrato/".concat(this.contrato.id,"/importar/pdf"),a,{}).then((function(t){e.contrato.nome_pdf=t.data[0].nome,e.buscarContratos(),e.$vs.notify({text:"Contrato importado com sucesso!",position:"top-center",color:"success",time:4e3,icon:"check_circle_outline"})}))}},mostrarModalAdicionarBoleto:function(){this.$modal.show("modal-adicionar-boleto"),this.buscarStatusBoleto()},esconderModalAdicionarBoleto:function(){this.$modal.hide("modal-adicionar-boleto"),this.boleto={},this.boleto.id_status_boleto=null},adicionarBoleto:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.boleto.valor=Object(c["b"])(t.boleto.valor),""!=t.boleto.data_quitacao&&null!=t.boleto.data_quitacao||(t.boleto.data_quitacao=""),e.next=4,i["a"].post("/contrato/boleto/cadastrar",{boleto:t.boleto,idContrato:t.contrato.id}).then((function(e){console.log(e),t.esconderModalAdicionarBoleto(),t.buscarBoletos(t.contrato.id)}));case 4:case"end":return e.stop()}}),e)})))()},deletarBoletoAlerta:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log(t.item),e.$bvModal.msgBoxConfirm("Tem certeza que deseja deletar o boleto: ".concat(("000000"+t.item.id).slice(-6)," ?"),{title:"Deletar boleto",buttonSize:"sm",okTitle:"Deletar",cancelTitle:"Cancelar",okVariant:"danger",footerClass:"p-2",centered:!0}).then((function(a){a&&e.deletarBoleto(t.item.id)}));case 2:case"end":return a.stop()}}),a)})))()},deletarBoleto:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].delete("/contrato/boleto/deletar",{params:{idBoleto:t}}).then((function(t){console.log(t),e.buscarBoletos(e.contrato.id)}));case 2:case"end":return a.stop()}}),a)})))()},cadastrarContrato:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.contrato.valor_boleto_convertido=Object(c["b"])(e.contrato.valor_boleto),!e.validarCamposObrigatorio()){a.next=6;break}if(!e.validarDataInicioFim()){a.next=6;break}return o=e.$store.state.usuario.id,a.next=6,i["a"].post("/contrato/cadastrar",{contrato:e.contrato,idUsuario:o}).then((function(a){e.contrato.id=a.data[0].id,e.$vs.notify({text:"Contrato cadastrado com sucesso!",position:"top-center",color:"success",time:6e3,icon:"check_circle_outline"}),t?(e.esconderModal(),e.buscarContratos(),e.limparModal()):(e.recarregarContratos=!0,e.editar=!0,e.buscarBoletos(e.contrato.id))})).catch((function(t){e.$vs.notify({text:"".concat(t.response.data.erro),position:"top-center",color:"danger",time:4e4,icon:"check_circle_outline"})}));case 6:case"end":return a.stop()}}),a)})))()},validarCamposObrigatorio:function(){return""!=this.contrato["id_responsavel"]&&""!=this.contrato["id_cliente"]&&""!=this.contrato["id_imovel"]&&""!=this.contrato["data_inicio"]&&""!=this.contrato["data_fim"]&&""!=this.contrato["valor_boleto"]&&""!=this.contrato["data_vencimento"]||(this.$vs.notify({text:"Campos obrigatorios vazio.",position:"top-center",color:"danger",time:4e3,icon:"check_circle_outline"}),!1)},validarDataInicioFim:function(){var t=this.contrato.data_inicio,e=this.contrato.data_fim;return!(e<=t)||(this.$vs.notify({text:"Datas de Início ou Fim inválidas",position:"top-center",color:"danger",time:5e3,icon:"check_circle_outline"}),!1)}},watch:{"contrato.data_inicio":function(t){10==t.length?this.ativo_data_termino=!0:(this.ativo_data_termino=!1,this.contrato.data_fim="",this.contrato.vigencia="")},"contrato.data_fim":function(t){if(10==t.length){var e=this.contrato.data_inicio;this.contrato.vigencia=s()(t).diff(e,"month")}else this.contrato.vigencia=""}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.buscarContratos();case 1:case"end":return e.stop()}}),e)})))()}},d=u,b=(a("81a3"),a("2877")),p=Object(b["a"])(d,o,r,!1,null,null,null);e["default"]=p.exports},"1c1f":function(t,e,a){},"764e":function(t,e,a){"use strict";a("1c1f")},"81a3":function(t,e,a){"use strict";a("8819")},8819:function(t,e,a){},e6f9:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"barra-top-cliente ",attrs:{"align-v":"center"}},[a("b-col",[a("h1",{staticClass:"mb-1"},[t._v("Cadastro de Clientes")])]),a("b-col",{staticClass:"my-1",attrs:{cols:"3"}},[a("b-form-group",{staticClass:"mb-0"},[a("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("b-icon",{attrs:{icon:"search"}})],1)]},proxy:!0}])},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Ex: João da Silva"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)],1),a("b-row",{staticClass:"tabela-clientes"},[a("b-col",{staticClass:"col-tabela-clientes"},[a("b-table",{attrs:{id:"tabela-cliente","primary-key":"nome","tbody-transition-props":t.transProps,bordered:"","head-variant":"dark","sort-icon-left":"",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"show-empty":"",small:"",striped:"",hover:"",outlined:"","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px)","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered,"row-clicked":function(e){return t.$set(e,"_showDetails",!e._showDetails)}},scopedSlots:t._u([{key:"cell(nome)",fn:function(e){return[a("label",{staticClass:"tr-cliente"},[t._v(t._s(e.item.nome))])]}},{key:"cell(email)",fn:function(e){return[a("label",{staticClass:"tr-cliente"},[t._v(t._s(e.item.email))])]}},{key:"cell(cpf_cnpj)",fn:function(e){return[a("label",{staticClass:"tr-cliente"},[t._v(t._s(e.item.cpf_cnpj))])]}},{key:"cell(status)",fn:function(e){return[a("label",{staticClass:"tr-cliente"},[t._v(t._s(e.item.status))])]}},{key:"cell(editar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"edit"},on:{click:function(a){return t.editarClienteModal(e.item.id)}}})]}},{key:"cell(deletar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"delete"},on:{click:function(a){return t.deletarClienteModal(e.item)}}})]}},{key:"table-colgroup",fn:function(){return[a("col"),a("col"),a("col"),a("col"),a("col",{staticStyle:{width:"15px"}}),a("col",{staticStyle:{width:"15px"}})]},proxy:!0},{key:"row-details",fn:function(e){return[a("b-card",[a("b-row",[a("b-col",{attrs:{cols:"auto"}},[a("p",[a("b",[t._v("Rua:")]),t._v(" "+t._s(e.item.rua)+","+t._s(e.item.numero))])]),a("b-col",{attrs:{cols:"auto"}},[a("p",[a("b",[t._v("Bairro: ")]),t._v(t._s(e.item.bairro))])]),a("b-col",{attrs:{cols:"auto"}},[a("p",[a("b",[t._v("Cidade: ")]),t._v(t._s(e.item.cidade))])]),a("b-col",{attrs:{cols:"auto"}},[a("p",[a("b",[t._v("Estado: ")]),t._v(t._s(e.item.estado))])]),a("b-col",[a("p",[a("b",[t._v("Complemento: ")]),t._v(t._s(e.item.complemento))])])],1),a("p",[a("b",[t._v("Telefones: ")])]),t._l(e.item.numero_telefone,(function(o,r){return a("div",{key:r},[a("b-row",[a("b-col",{attrs:{cols:"auto"}},[a("p",[t._v(t._s(o))])]),a("b-col",[a("p",[t._v(t._s(e.item.tipo_telefone[r]))])])],1)],1)}))],2)]}}])})],1)],1),a("b-container",{staticClass:"divider-personalizado",attrs:{fluid:""}},[a("b-row",{attrs:{"align-v":"end"}},[a("b-col",{attrs:{cols:"auto"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"left","first-text":"Primeira","last-text":"Última"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("b-col",{attrs:{sm:"5",md:"auto"}},[a("b-form-group",{staticClass:"mb-1",attrs:{label:"Por pagina","label-for":"per-page-select","label-cols-sm":"auto","label-cols-md":"auto","label-cols-lg":"auto","label-align-sm":"right","label-size":"sm",align:"left"}},[a("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"ml-auto",staticStyle:{"margin-bottom":"-5px"},attrs:{cols:"auto"}},[a("vs-button",{attrs:{color:"#24a35a",type:"filled",icon:"person_add"},on:{click:t.mostrarModal}},[t._v(" Adicionar ")])],1)],1)],1),a("modal",{staticClass:"modal-adicionando-cliente",attrs:{name:"modal-cliente",width:"60%",height:"auto",scrollable:!0,"click-to-close":!1}},[a("h3",[t._v("Adicionando cliente")]),a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Dados gerais",active:""}},[a("b-row",{staticClass:"mb-2"},[a("b-col",[a("b-form-radio-group",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.ariaDescribedby;return[a("b-form-radio",{attrs:{"aria-describedby":o,value:"pessoa física"}},[t._v("Pessoa física*")]),a("b-form-radio",{attrs:{"aria-describedby":o,value:"pessoa jurícida"}},[t._v("Pessoa jurídica*")])]}}]),model:{value:t.cliente.tipo_cliente,callback:function(e){t.$set(t.cliente,"tipo_cliente",e)},expression:"cliente.tipo_cliente"}})],1)],1),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{cols:"5"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Nome*"},model:{value:t.cliente.nome,callback:function(e){t.$set(t.cliente,"nome",e)},expression:"cliente.nome"}})],1),a("b-col",{attrs:{cols:"2"}},[a("b-form-group",{attrs:{id:"select-cliente",label:"Estado Civil"}},[a("b-form-select",{attrs:{options:t.estadosCivis,"value-field":"id","text-field":"descricao"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.cliente.estado_civil,callback:function(e){t.$set(t.cliente,"estado_civil",e)},expression:"cliente.estado_civil"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("vs-input",{staticClass:"input-nascimento",attrs:{label:"Data de Nascimento",type:"date"},model:{value:t.cliente.data_nascimento,callback:function(e){t.$set(t.cliente,"data_nascimento",e)},expression:"cliente.data_nascimento"}})],1),a("b-col",{attrs:{cols:"2"}},[a("b-form-group",{attrs:{id:"select-cliente",label:"Status"}},[a("b-form-select",{attrs:{options:t.tiposStatus,"value-field":"id","text-field":"descricao"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.cliente.status,callback:function(e){t.$set(t.cliente,"status",e)},expression:"cliente.status"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Email*"},model:{value:t.cliente.email,callback:function(e){t.$set(t.cliente,"email",e)},expression:"cliente.email"}})],1),a("b-col",{attrs:{cols:"3"}},[a("vs-input",{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##","##.###.###/####-##"],expression:"['###.###.###-##', '##.###.###/####-##']"}],staticClass:"input-personalizado",attrs:{onKeyDown:"if(this.value.length==15 && event.keyCode!=8) return false;",type:"text","label-placeholder":"CPF ou CNPJ*"},model:{value:t.cliente.cpf_cnpj,callback:function(e){t.$set(t.cliente,"cpf_cnpj",e)},expression:"cliente.cpf_cnpj"}})],1),a("b-col",{attrs:{cols:"3"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{onKeyDown:"if(this.value.length==10 && event.keyCode!=8) return false;",type:"number","label-placeholder":"Identidade"},model:{value:t.cliente.identidade,callback:function(e){t.$set(t.cliente,"identidade",e)},expression:"cliente.identidade"}})],1)],1),a("Carregando",{attrs:{visivel:t.carregandoCep}}),a("b-row",[a("b-col",{attrs:{cols:"2"}},[a("vs-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],staticClass:"input-personalizado",attrs:{type:"text",onkeypress:"return event.charCode >= 48 && event.charCode <= 57",onKeyDown:"if(this.value.length==10 && event.keyCode!=8) return false;","label-placeholder":"CEP"},model:{value:t.cliente.cep,callback:function(e){t.$set(t.cliente,"cep",e)},expression:"cliente.cep"}})],1),a("b-col",{attrs:{cols:"5"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Rua"},model:{value:t.cliente.rua,callback:function(e){t.$set(t.cliente,"rua",e)},expression:"cliente.rua"}})],1),a("b-col",{attrs:{cols:"2"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Número"},model:{value:t.cliente.numero,callback:function(e){t.$set(t.cliente,"numero",e)},expression:"cliente.numero"}})],1),a("b-col",{attrs:{cols:"3"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Complemento"},model:{value:t.cliente.complemento,callback:function(e){t.$set(t.cliente,"complemento",e)},expression:"cliente.complemento"}})],1)],1),a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Bairro"},model:{value:t.cliente.bairro,callback:function(e){t.$set(t.cliente,"bairro",e)},expression:"cliente.bairro"}})],1),a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Cidade"},model:{value:t.cliente.cidade,callback:function(e){t.$set(t.cliente,"cidade",e)},expression:"cliente.cidade"}})],1),a("b-col",{attrs:{cols:"2"}},[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"UF",maxlength:"2"},model:{value:t.cliente.estado,callback:function(e){t.$set(t.cliente,"estado",e)},expression:"cliente.estado"}})],1)],1)],1),a("b-tab",{attrs:{title:"Inf. Adicionais"}},[a("b-row",[a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Indicação",required:""},model:{value:t.cliente.referencia,callback:function(e){t.$set(t.cliente,"referencia",e)},expression:"cliente.referencia"}})],1)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{id:"textarea",label:"Observação","label-for":"input-1"}},[a("b-form-textarea",{attrs:{id:"textarea",rows:"3","max-rows":"6"},model:{value:t.cliente.observacao,callback:function(e){t.$set(t.cliente,"observacao",e)},expression:"cliente.observacao"}})],1)],1)],1)],1),a("b-tab",{attrs:{title:"Telefones",disabled:!t.editar}},[a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("vs-input",{directives:[{name:"mask",rawName:"v-mask",value:["(##)####-####","(##)#####-####"],expression:"['(##)####-####', '(##)#####-####']"}],staticClass:"input-personalizado",attrs:{"label-placeholder":"Numero de telefone"},model:{value:t.telefone.numero,callback:function(e){t.$set(t.telefone,"numero",e)},expression:"telefone.numero"}})],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"select-cliente",label:"Tipo telefone"}},[a("b-form-select",{attrs:{options:t.tiposTelefone,"value-field":"id","text-field":"descricao"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("Selecione")])]},proxy:!0}]),model:{value:t.telefone.id_tipo_telefone,callback:function(e){t.$set(t.telefone,"id_tipo_telefone",e)},expression:"telefone.id_tipo_telefone"}})],1)],1),a("b-col",[a("vs-input",{staticClass:"input-personalizado",attrs:{"label-placeholder":"Observação"},model:{value:t.telefone.observacao,callback:function(e){t.$set(t.telefone,"observacao",e)},expression:"telefone.observacao"}})],1),t.telefoneEditar?a("b-col",{attrs:{cols:"auto"}},[a("vs-button",{staticClass:"botao-salvar botao-adicionar-telefone",attrs:{type:"filled",icon:"add_ic_call",color:"#5498ff"},on:{click:function(e){return e.preventDefault(),t.salvarEdicaoTelefone()}}})],1):a("b-col",{attrs:{cols:"auto"}},[a("vs-button",{staticClass:"botao-salvar botao-adicionar-telefone",attrs:{type:"filled",icon:"add_ic_call",color:"#5498ff"},on:{click:function(e){return e.preventDefault(),t.adicionarTelefone()}}})],1)],1),a("b-row",[a("b-col",[a("b-table",{attrs:{fields:t.fieldsTelefone,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"head-variant":"dark","show-empty":"",items:t.telefones,small:"",striped:"",hover:"",bordered:"","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px)",outlined:"","sort-icon-left":"","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"table-colgroup",fn:function(){return[a("col"),a("col"),a("col"),a("col",{staticStyle:{width:"15px"}}),a("col",{staticStyle:{width:"15px"}})]},proxy:!0},{key:"cell(editar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"edit"},on:{click:function(a){return t.editarTelefone(e)}}})]}},{key:"cell(deletar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"delete"},on:{click:function(a){return t.alertaDeletarTelefone(e)}}})]}}])})],1)],1)],1),a("b-tab",{attrs:{title:"Contratos",disabled:!t.editar},on:{click:function(e){return e.preventDefault(),t.buscarContratos(e)}}},[a("b-row",[a("b-col",[a("h6",[t._v("Contratos de: "+t._s(t.cliente.nome)+" ")])])],1),a("b-row",{staticClass:"tabela-contratos-clientes"},[a("b-col",{staticClass:"col-tabela-contratos-clientes"},[a("b-table",{attrs:{fields:t.fieldsContratos,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"head-variant":"dark","show-empty":"","sort-icon-left":"",small:"",items:t.contratos,striped:"",hover:"",bordered:"",selectable:"","select-mode":"single","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px - 200px)",outlined:"","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered,"row-selected":t.selecionandoContrato},scopedSlots:t._u([{key:"table-colgroup",fn:function(){return[a("col"),a("col"),a("col"),a("col"),a("col"),a("col",{staticStyle:{width:"15px"}})]},proxy:!0},{key:"cell(id)",fn:function(e){return[a("label",[t._v(" "+t._s(("0000"+e.item.id).slice(-4))+" ")])]}},{key:"cell(data_inicio)",fn:function(e){return[a("label",[t._v(" "+t._s(t.$dayjs(e.item.data_inicio).format("DD/MM/YYYY"))+" ")])]}},{key:"cell(data_fim)",fn:function(e){return[a("label",[t._v(" "+t._s(t.$dayjs(e.item.data_fim).format("DD/MM/YYYY"))+" ")])]}},{key:"cell(status)",fn:function(e){return[e.item.nome_pdf?a("label",[t._v(" "+t._s(e.item.status)+" ")]):a("label",{staticStyle:{color:"red"}},[a("b",[t._v(" Falta PDF ")])])]}},{key:"cell(editar)",fn:function(e){return[a("vs-button",{attrs:{type:"flat",color:"dark",icon:"edit"},on:{mousedown:function(a){return a.stopPropagation(),t.mostrarModalContrato(e.item)}}})]}}])})],1)],1),a("b-row",[a("b-col",[a("h6",[t._v("Boletos do contrato: "+t._s(t.idContrato))])])],1),a("b-row",{staticClass:"tabela-parcelas-clientes"},[a("b-col",{staticClass:"col-tabela-parcelas-clientes"},[a("b-table",{attrs:{fields:t.fieldsBoletos,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,"show-empty":"","head-variant":"dark",items:t.boletos,small:"",striped:"","sort-icon-left":"",bordered:"",hover:"",outlined:"","sticky-header":"calc(100vh - 82px - 30px - 48px - 52px - 55px - 200px)","no-border-collapse":""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(data_vencimento)",fn:function(e){return[a("label",[t._v(" "+t._s(t.$dayjs(e.item.data_vencimento).format("DD/MM/YYYY"))+" ")])]}},{key:"cell(id)",fn:function(e){return[a("label",[t._v(" "+t._s(("000000"+e.item.id).slice(-6))+" ")])]}},{key:"cell(data_quitacao)",fn:function(e){return[e.item.data_quitacao?a("label",[t._v(" "+t._s(t.$dayjs(e.item.data_quitacao).format("DD/MM/YYYY"))+" ")]):t._e()]}},{key:"cell(valor)",fn:function(e){return[a("label",[t._v("R$ "+t._s(e.item.valor.replace(".",",")))])]}}])})],1)],1)],1)],1),a("b-row",{attrs:{"align-h":"end"}},[a("b-col",{attrs:{cols:"2"}},[t.editar?a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},on:{click:t.editarCliente}},[t._v(" Salvar ")]):a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},on:{click:function(e){return t.cadastrarCliente(!1)}}},[t._v(" Salvar ")])],1),t.editar?t._e():a("b-col",{attrs:{cols:"auto"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#24a35a",type:"filled",icon:"save"},on:{click:function(e){return t.cadastrarCliente(!0)}}},[t._v(" Salvar e Sair ")])],1),a("b-col",{attrs:{cols:"2"}},[a("vs-button",{staticClass:"botao-salvar",attrs:{color:"#707070",type:"filled",icon:"clear"},nativeOn:{click:function(e){return t.esconderModal(e)}}},[t._v(" Cancelar ")])],1)],1)],1),a("ModalContrato",{attrs:{idContrato:t.idContratoModal,visivel:t.modal_visivel},on:{"esconder-modal":function(e){t.modal_visivel=e}}})],1)},r=[],n=(a("4160"),a("fb6a"),a("b64b"),a("159b"),a("96cf"),a("1da1")),i=a("7424"),l=a("2344"),s=a("6d6d"),c=a("e1d1"),u={name:"VisualizarCliente",components:{Carregando:l["a"],ModalContrato:c["a"]},data:function(){return{transProps:{name:"flip-list"},items:[],fields:[{key:"nome",label:"Nome",sortable:!0,thClass:"text-center"},{key:"email",label:"Email",sortable:!0,thClass:"text-center"},{key:"cpf_cnpj",label:"CPF ou CNPJ",sortable:!0,thClass:"text-center"},{key:"status",label:"Status",sortable:!0,class:"text-center"},{key:"editar",label:""},{key:"deletar",label:""}],fieldsTelefone:[{key:"numero",label:"Número",sortable:!0,thClass:"text-center",tdClass:"td-centralizado"},{key:"descricao",label:"Tipo",sortable:!0,class:"text-center",tdClass:"td-centralizado"},{key:"observacao",label:"Observação",sortable:!0,thClass:"text-center",tdClass:"td-centralizado"},{key:"editar",label:""},{key:"deletar",label:""}],fieldsContratos:[{key:"id",label:"Contrato",sortable:!0,class:"text-center",tdClass:"td-centralizado"},{key:"nome",label:"Imóvel",sortable:!0,thClass:"text-center",tdClass:"td-centralizado"},{key:"data_inicio",label:"Data de Início",sortable:!0,class:"text-center",tdClass:"td-centralizado"},{key:"data_fim",label:"Data de Término",sortable:!0,class:"text-center",tdClass:"td-centralizado"},{key:"status",label:"Status",sortable:!0,class:"text-center",tdClass:"td-centralizado"},{key:"editar",label:""}],fieldsBoletos:[{key:"id",label:"Código",sortable:!0,class:"text-center"},{key:"data_vencimento",label:"Vencimento",sortable:!0,class:"text-center"},{key:"valor",label:"Valor",sortable:!0,class:"text-center"},{key:"data_quitacao",label:"Quitação",sortable:!0,class:"text-center"},{key:"status",label:"Status",sortable:!0,class:"text-center"}],totalRows:1,currentPage:1,perPage:25,pageOptions:[25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],cliente:{nome:"",rua:"",cep:"",bairro:"",cidade:"",estado:"",complemento:"",cpf_cnpj:"",identidade:"",email:"",referencia:"",data_nascimento:"",estado_civil:null,numero:"",status:null,observacao:"",tipo_cliente:"",id:""},telefones:[],telefone:{id:"",numero:"",id_tipo_telefone:null,observacao:""},tiposTelefone:[],tiposStatus:[],editar:!1,estadosCivis:[],carregandoCep:!1,contEditarCep:0,contratos:[],idContrato:"",boletos:[],idContratoModal:"",telefoneEditar:!1,indexTelefoneTabela:0,modal_visivel:!1}},methods:{buscarEstadosCivis:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/estados_civis").then((function(e){t.estadosCivis=e.data}));case 2:case"end":return e.stop()}}),e)})))()},buscarClientes:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/clientes").then((function(e){t.items=e.data,t.totalRows=t.items.length})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},buscarContratos:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/cliente/contratos",{params:{idCliente:t.cliente.id}}).then((function(e){t.contratos=e.data}));case 2:case"end":return e.stop()}}),e)})))()},buscarTelefones:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/telefones",{params:{idCliente:t.cliente.id}}).then((function(e){t.telefones=e.data}));case 2:case"end":return e.stop()}}),e)})))()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},deletarCliente:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].delete("/cliente/deletar/".concat(t.id)).then((function(){e.buscarClientes()}));case 2:case"end":return a.stop()}}),a)})))()},deletarClienteModal:function(t){var e=this;this.$bvModal.msgBoxConfirm("Tem certeza que deseja deletar o cliente: ".concat(t.nome," ?"),{title:"Deletar cliente",buttonSize:"sm",okTitle:"Deletar",cancelTitle:"Cancelar",okVariant:"danger",footerClass:"p-2",centered:!0}).then((function(a){a&&e.deletarCliente(t)}))},editarClienteModal:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].get("/cliente",{params:{idCliente:t}}).then((function(t){e.cliente=t.data,console.log(e.cliente),e.mostrarModal(),e.editar=!0}));case 2:case"end":return a.stop()}}),a)})))()},editarCliente:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,o,r,n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validarCamposObrigatorio()){e.next=8;break}for(o in a=["status","estado_civil"],a)""==t.cliente[a[o]]&&(t.cliente[a[o]]=null);for(n in r=["data_nascimento","identidade"],r)null==t.cliente[r[n]]&&(t.cliente[r[n]]="");return l=t.$store.state.usuario.id,e.next=8,i["a"].post("/cliente/editar/".concat(t.cliente.id),{data:t.cliente,telefones:t.telefones,idUsuario:l}).then((function(e){var a=e.data[0].nome;t.$vs.notify({text:"Cliente editado com sucesso: ".concat(a," !"),position:"top-center",color:"warning",time:6e3,icon:"check_circle_outline"}),t.buscarClientes(),t.limparModal(),t.esconderModal()})).catch((function(e){t.$vs.notify({text:"".concat(e.response.data.erro),position:"top-center",color:"danger",time:4e3,icon:"check_circle_outline"})}));case 8:case"end":return e.stop()}}),e)})))()},buscarTipoTelefones:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/tipos_telefones").then((function(e){t.tiposTelefone=e.data}));case 2:case"end":return e.stop()}}),e)})))()},adicionarTelefone:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.cliente.id,e.next=3,i["a"].post("/cliente/telefone/cadastrar",{telefone:t.telefone,idCliente:a}).then((function(){t.buscarTelefones(),t.telefone={id:"",numero:"",id_tipo_telefone:null,observacao:""}}));case 3:case"end":return e.stop()}}),e)})))()},editarTelefone:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.telefoneEditar=!0,e.telefone.numero=t.item.numero,e.telefone.id=t.item.id,e.telefone.id_tipo_telefone=t.item.id_tipo_telefone,e.telefone.observacao=t.item.observacao;case 5:case"end":return a.stop()}}),a)})))()},salvarEdicaoTelefone:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/cliente/telefone/editar",{telefone:t.telefone}).then((function(){t.buscarTelefones(),t.telefone={id:"",numero:"",id_tipo_telefone:null,observacao:""}}));case 2:case"end":return e.stop()}}),e)})))()},alertaDeletarTelefone:function(t){var e=this;this.$bvModal.msgBoxConfirm("Tem certeza que deseja deletar o telefone: ".concat(t.item.numero," ?"),{title:"Deletar telefone",buttonSize:"sm",okTitle:"Deletar",cancelTitle:"Cancelar",okVariant:"danger",footerClass:"p-2",centered:!0}).then((function(a){a&&e.deletarTelefone(t)}))},deletarTelefone:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].delete("/cliente/telefone/deletar",{params:{idTelefone:t.item.id}}).then((function(){e.buscarTelefones()}));case 2:case"end":return a.stop()}}),a)})))()},buscarTipoStatus:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/cliente/tipos_status").then((function(e){t.tiposStatus=e.data}));case 2:case"end":return e.stop()}}),e)})))()},mostrarModal:function(){this.$modal.show("modal-cliente"),this.buscarTipoTelefones(),this.buscarTipoStatus(),this.buscarEstadosCivis(),this.editar&&this.buscarTelefones()},esconderModal:function(){this.$modal.hide("modal-cliente"),this.limparModal(),this.contEditarCep=0,this.editar=!1,this.recarregarClientes&&this.buscarClientes()},limparModal:function(){var t=this;Object.keys(this.cliente).forEach((function(e){t.cliente[e]=""})),this.telefones=[{numero:"",tipo:null}],this.cliente.status=null,this.cliente.estado_civil=null,this.contratos=[],this.boletos=[]},cadastrarCliente:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,r,n,l,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.validarCamposObrigatorio()){a.next=8;break}for(r in o=["data_nascimento","identidade","status","estado_civil"],o)null==e.cliente[o[r]]&&(e.cliente[o[r]]="");for(l in n=["data_nascimento","identidade"],n)null==e.cliente[n[l]]&&(e.cliente[n[l]]="");return s=e.$store.state.usuario.id,a.next=8,i["a"].post("/cliente/cadastrar",{data:e.cliente,telefones:e.telefones,idUsuario:s}).then((function(a){var o=a.data[0].nome;e.cliente.id=a.data[0].id,e.$vs.notify({text:"Cliente cadastrado com sucesso: ".concat(o," !"),position:"top-center",color:"success",time:6e3,icon:"check_circle_outline"}),t?(e.esconderModal(),e.buscarClientes(),e.limparModal()):(e.recarregarClientes=!0,e.editar=!0)})).catch((function(t){e.$vs.notify({text:"".concat(t.response.data.erro),position:"top-center",color:"danger",time:4e4,icon:"check_circle_outline"})}));case 8:case"end":return a.stop()}}),a)})))()},validarCamposObrigatorio:function(){return""!=this.cliente["nome"]&&""!=this.cliente["email"]&&""!=this.cliente["tipo_cliente"]||(this.$vs.notify({text:"Campos obrigatorios vazio.",position:"top-center",color:"danger",time:4e3,icon:"check_circle_outline"}),!1)},atribuirCep:function(t){""!=t.bairro&&(this.cliente["bairro"]=t.bairro),""!=t.localidade&&(this.cliente.cidade=t.localidade),""!=t.uf&&(this.cliente.estado=t.uf),""!=t.complemento&&(this.cliente.complemento=t.complemento),""!=t.logradouro&&(this.cliente.rua=t.logradouro)},selecionandoContrato:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.idContrato=("0000"+t[0].id).slice(-4),a.next=3,i["a"].get("/cliente/contrato/boletos",{params:{idContrato:t[0].id}}).then((function(t){e.boletos=t.data}));case 3:case"end":return a.stop()}}),a)})))()},mostrarModalContrato:function(t){this.$modal.show("modal-contrato"),this.modal_visivel=!0,this.idContratoModal=t.id}},watch:{"cliente.cep":function(t){var e=this;Object(s["a"])(t)&&(9==t.length&&(this.carregandoCep=!0),Object(s["a"])(t).then((function(t){e.carregandoCep=!1,e.atribuirCep(t)})))}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.buscarClientes(),t.buscarEstadosCivis();case 2:case"end":return e.stop()}}),e)})))()}},d=u,b=(a("764e"),a("2877")),p=Object(b["a"])(d,o,r,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=cliente.2ee597ee.js.map